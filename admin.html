<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmotiQuest - Panel de Administrador</title>
  
  <!-- Estilos -->
  <link rel="stylesheet" href="./css/styles.css">
  <link rel="stylesheet" href="./css/admin.css">
  <link rel="stylesheet" href="./css/responsive-fix.css">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="admin-page">

  <!-- Header del Admin -->
  <header class="admin-header">
    <div class="admin-header-content">
    
      <div class="admin-branding">
        <div class="app-logo">
          <img src="./images/logo/emotiquest-logo.png" alt="EmotiQuest Logo" class="logo-image">
        </div>
        <h1 class="admin-title">Emoti<span class="title-quest">Quest</span></h1>
  
        <p class="admin-subtitle">Panel de Administrador</p>
      </div>
      
      <div class="admin-actions">
        <button id="btn-exportar" class="btn btn-secondary" title="Exportar datos a JSON">
          üì• Exportar Datos
        </button>
        <button id="btn-importar" class="btn btn-primary" title="Importar datos desde JSON">
          üì§ Importar Datos
        </button>
        <input type="file" id="file-input" accept=".json" style="display: none;">
        <a href="./index.html" class="btn btn-volver">üè† Volver al Inicio</a>
      </div>
    </div>
  </header>

  <!-- Contenedor Principal -->
  <main class="admin-container">

    <!-- Mensaje de Bienvenida / Estado -->
    <section class="admin-welcome" id="admin-welcome">
      <div class="welcome-card">
        <h2>üëã Bienvenido al Panel de Control</h2>
        <p id="welcome-message">Cargando estad√≠sticas...</p>
      </div>
    </section>

    <!-- Estad√≠sticas Generales -->
    <section class="admin-stats" id="admin-stats">
      <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-content">
          <h3 id="stat-total">0</h3>
          <p>Sesiones Totales</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
          <h3 id="stat-hoy">0</h3>
          <p>Sesiones Hoy</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìù</div>
        <div class="stat-content">
          <h3 id="stat-emocion">-</h3>
          <p>Emoci√≥n Predominante</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìÖ</div>
        <div class="stat-content">
          <h3 id="stat-promedio">0</h3>
          <p>Edad Promedio</p>
        </div>
      </div>
    </section>

    <!-- Gr√°fico de Distribuci√≥n de Emociones -->
    <section class="admin-chart-section">
      <div class="chart-card">
        <div class="chart-header">
          <h2>üìä Distribuci√≥n de Emociones</h2>
          <p>Visualizaci√≥n de todas las emociones registradas</p>
        </div>
        
        <div class="chart-container" id="chart-container">
          <!-- El gr√°fico se genera din√°micamente con JavaScript -->
          <div class="chart-bars" id="chart-bars">
            <!-- Barras generadas din√°micamente -->
          </div>
          <div class="chart-legend" id="chart-legend">
            <!-- Leyenda generada din√°micamente -->
          </div>
        </div>

        <div class="chart-empty" id="chart-empty" style="display: none;">
          <p>üì≠ No hay datos para mostrar</p>
          <p class="text-muted">Las sesiones aparecer√°n aqu√≠ cuando los usuarios completen el cuestionario</p>
        </div>
      </div>
    </section>
<!-- ========================================
         NUEVA SECCI√ìN: CALIFICACIONES
         ======================================== -->
    <section class="admin-calificaciones-section">
      <div class="calificaciones-card">
        <div class="calificaciones-header">
          <h2>‚≠ê Feedback de Usuarios</h2>
          <p>Calificaciones y opiniones sobre EmotiQuest</p>
        </div>

        <!-- Estad√≠sticas de Calificaciones -->
        <div class="calificaciones-stats" id="calificaciones-stats">
          <div class="cal-stat-card">
            <div class="cal-stat-icon">üìù</div>
            <div class="cal-stat-content">
              <h3 id="cal-stat-total">0</h3>
              <p>Total Calificaciones</p>
            </div>
          </div>

          <div class="cal-stat-card">
            <div class="cal-stat-icon">‚≠ê</div>
            <div class="cal-stat-content">
              <h3 id="cal-stat-promedio">0.0</h3>
              <p>Promedio de Estrellas</p>
            </div>
          </div>

          <div class="cal-stat-card">
            <div class="cal-stat-icon">üëç</div>
            <div class="cal-stat-content">
              <h3 id="cal-stat-volverian">0%</h3>
              <p>Volver√≠an a Usar</p>
            </div>
          </div>
        </div>

        <!-- Gr√°fico de Estrellas -->
        <div class="calificaciones-chart">
          <h3 class="chart-subtitle">Distribuci√≥n de Calificaciones</h3>
          <div class="stars-chart" id="stars-chart">
            <!-- Barras horizontales generadas din√°micamente -->
          </div>
        </div>

        <!-- Gr√°fico de "Volver√≠a a usar" -->
        <div class="calificaciones-volveria">
          <h3 class="chart-subtitle">¬øVolver√≠an a usar EmotiQuest?</h3>
          <div class="volveria-chart" id="volveria-chart">
            <!-- Barras generadas din√°micamente -->
          </div>
        </div>

        <!-- Tabla de Calificaciones -->
        <div class="calificaciones-tabla">
          <h3 class="table-subtitle">Registro de Calificaciones</h3>
          <p id="calificaciones-count">Total: 0 calificaciones</p>

          <div class="table-wrapper">
            <table class="admin-table" id="calificaciones-table">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Edad</th>
                  <th>G√©nero</th>
                  <th>Escolaridad</th>
                  <th>Estrellas</th>
                  <th>¬øVolver√≠a?</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="calificaciones-table-body">
                <!-- Filas generadas din√°micamente -->
              </tbody>
            </table>
          </div>

          <div class="table-empty" id="calificaciones-empty" style="display: none;">
            <p>üì≠ No hay calificaciones registradas</p>
            <p class="text-muted">Las calificaciones aparecer√°n aqu√≠ cuando los usuarios califiquen la experiencia</p>
          </div>
        </div>

      </div>
    </section>
    <!-- FIN SECCI√ìN CALIFICACIONES -->
    <!-- Filtros -->
    <section class="admin-filters">
      <div class="filters-card">
        <h3>üîç Filtros de B√∫squeda</h3>
        <div class="filters-grid">
          
          <div class="filter-group">
            <label for="filter-fecha">Fecha:</label>
            <input type="date" id="filter-fecha" class="filter-input">
          </div>

          <div class="filter-group">
            <label for="filter-emocion">Emoci√≥n:</label>
            <select id="filter-emocion" class="filter-input">
              <option value="">Todas</option>
              <option value="alegria">Alegr√≠a</option>
              <option value="tristeza">Tristeza</option>
              <option value="enojo">Enojo</option>
              <option value="miedo">Miedo</option>
              <option value="calma">Calma</option>
              <option value="nerviosismo">Nerviosismo</option>
              <option value="desmotivacion">Desmotivaci√≥n</option>
              <option value="motivacion">Motivaci√≥n</option>
              <option value="inseguridad">Inseguridad</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="filter-edad">Edad:</label>
            <input type="number" id="filter-edad" class="filter-input" placeholder="Ej: 15">
          </div>

         <div class="filter-group">
            <label for="filter-genero">G√©nero:</label>
            <select id="filter-genero" class="filter-input">
              <option value="">Todos</option>
              <option value="masculino">Masculino</option>
              <option value="femenino">Femenino</option>
              <option value="pnd">Prefiero no decirlo</option>
            </select>
          </div>


          <div class="filter-actions">
            <button id="btn-aplicar-filtros" class="btn btn-primary">Aplicar Filtros</button>
            <button id="btn-limpiar-filtros" class="btn btn-secondary">Limpiar</button>
          </div>

        </div>
      </div>
    </section>

    <!-- Tabla de Sesiones -->
    <section class="admin-table-section">
      <div class="table-card">
        <div class="table-header">
          <h2>üìã Registro de Sesiones</h2>
          <p id="table-count">Total: 0 sesiones</p>
        </div>

        <div class="table-wrapper">
          <table class="admin-table" id="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Edad</th>
                <th>G√©nero</th>
                <th>Escolaridad</th>
                <th>Emoci√≥n Predominante</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="table-body">
              <!-- Filas generadas din√°micamente -->
            </tbody>
          </table>
        </div>

        <div class="table-empty" id="table-empty" style="display: none;">
          <p>üì≠ No hay sesiones registradas</p>
          <p class="text-muted">Los datos aparecer√°n aqu√≠ cuando los usuarios completen el cuestionario</p>
        </div>
      </div>
    </section>

    <!-- Modal de Detalles de Sesi√≥n -->
    <div class="modal" id="modal-detalles" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>üìä Detalles de la Sesi√≥n</h2>
          <button class="modal-close" id="modal-close">‚úï</button>
        </div>
        <div class="modal-body" id="modal-body"></div>
      </div>
    </div>

    <!-- Modal de Detalles de Calificaci√≥n -->
    <div class="modal" id="modal-calificacion" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>‚≠ê Detalles de la Calificaci√≥n</h2>
          <button class="modal-close" id="modal-calificacion-close">‚úï</button>
        </div>
        <div class="modal-body" id="modal-calificacion-body"></div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="main-footer">
    <p>&copy; 2025 EmotiQuest - Panel de Administrador | Datos privados y seguros</p>
  </footer>

  <!-- Scripts -->
  <script src="./js/storage.js"></script>
  <script src="./js/emociones.js"></script>
  <script src="./js/admin.js"></script>

</body>
</html>